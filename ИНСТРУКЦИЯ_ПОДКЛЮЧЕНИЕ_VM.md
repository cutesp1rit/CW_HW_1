# Инструкция по подключению к виртуальной машине Windows

## Вариант 1: Удаленный рабочий стол (RDP) - Рекомендуется

### Для Windows

1. **Откройте "Подключение к удаленному рабочему столу"**
   - Нажмите `Win + R`
   - Введите `mstsc` и нажмите Enter
   - Или найдите в меню Пуск: "Подключение к удаленному рабочему столу"

2. **Введите данные подключения**
   - Компьютер: `IP_адрес_VM` (например, 192.168.1.100)
   - Имя пользователя: `ваш_логин`
   - Нажмите "Подключить"

3. **Введите пароль**
   - Введите пароль, предоставленный преподавателем
   - Можно поставить галочку "Запомнить учетные данные"

4. **Подтвердите сертификат**
   - Если появится предупреждение о сертификате, нажмите "Да"

### Для macOS

1. **Установите Microsoft Remote Desktop**
   - Откройте App Store
   - Найдите "Microsoft Remote Desktop"
   - Установите приложение

2. **Создайте новое подключение**
   - Откройте Microsoft Remote Desktop
   - Нажмите "+" → "Add PC"
   - PC name: `IP_адрес_VM`
   - User account: "Add User Account"
     - Username: `ваш_логин`
     - Password: `ваш_пароль`
   - Нажмите "Add"

3. **Подключитесь**
   - Дважды кликните на созданное подключение
   - Если появится предупреждение о сертификате, нажмите "Continue"

### Для Linux

1. **Установите Remmina (если еще не установлен)**
   ```bash
   sudo apt install remmina remmina-plugin-rdp  # Ubuntu/Debian
   sudo dnf install remmina remmina-plugins-rdp  # Fedora
   ```

2. **Запустите Remmina**
   ```bash
   remmina
   ```

3. **Создайте новое подключение**
   - Нажмите "+" (New connection)
   - Protocol: RDP
   - Server: `IP_адрес_VM`
   - Username: `ваш_логин`
   - Password: `ваш_пароль`
   - Нажмите "Save and Connect"

---

## Вариант 2: SSH (если доступен)

### Для Windows (PowerShell или CMD)

```powershell
ssh username@IP_адрес_VM
```

Введите пароль когда попросит.

### Для macOS/Linux

```bash
ssh username@IP_адрес_VM
```

Введите пароль когда попросит.

---

## После подключения к VM

### 1. Проверка Java

Откройте командную строку (Command Prompt) или PowerShell:

```cmd
java -version
```

Должна быть Java 21 или выше. Если нет, установите Oracle JDK 21.

### 2. Копирование файлов на VM

#### Через RDP (самый простой способ)

1. В окне RDP подключения нажмите "Показать параметры"
2. Перейдите на вкладку "Локальные ресурсы"
3. Нажмите "Подробнее" в разделе "Локальные устройства и ресурсы"
4. Поставьте галочку на "Диски"
5. Подключитесь к VM
6. На VM откройте "Этот компьютер" - вы увидите диски вашего локального компьютера
7. Скопируйте `server.jar` с локального диска на VM

#### Через SCP (если доступен SSH)

На вашем локальном компьютере:

```bash
scp target/server.jar username@IP_адрес_VM:C:/Users/username/
```

#### Через общую папку в RDP

1. В настройках RDP выберите папку для общего доступа
2. На VM эта папка будет доступна через сеть

### 3. Запуск сервера на VM

Откройте PowerShell или Command Prompt на VM:

```cmd
cd C:\Users\username\
java -Xms100M -Xmx200M -jar server.jar 8080
```

### 4. Узнать IP адрес VM

На VM выполните:

```cmd
ipconfig
```

Найдите строку "IPv4 Address" - это IP адрес вашей VM.

### 5. Открытие порта в Firewall (если нужно)

Если клиент не может подключиться, откройте порт в Windows Firewall:

```powershell
# Запустите PowerShell от имени администратора
New-NetFirewallRule -DisplayName "Java Server" -Direction Inbound -Protocol TCP -LocalPort 8080 -Action Allow
```

Или через GUI:
1. Панель управления → Система и безопасность → Брандмауэр Windows
2. Дополнительные параметры
3. Правила для входящих подключений → Создать правило
4. Тип: Порт
5. TCP, порт 8080
6. Разрешить подключение
7. Применить ко всем профилям
8. Имя: Java Server

---

## Мониторинг на Windows VM

### Диспетчер задач

1. Нажмите `Ctrl + Shift + Esc`
2. Перейдите на вкладку "Производительность"
3. Следите за CPU, памятью и сетью во время работы сервера

### Монитор ресурсов

1. Нажмите `Win + R`
2. Введите `resmon` и нажмите Enter
3. Перейдите на вкладку "Сеть"
4. Найдите процесс `java.exe`

### Скриншот для отчета

1. Запустите сервер
2. Откройте Диспетчер задач
3. Нажмите `Win + Shift + S` для создания скриншота
4. Выделите область с информацией о процессе Java
5. Скриншот скопируется в буфер обмена
6. Вставьте в Paint или Word и сохраните

---

## Проверка подключения с локального компьютера

### Ping

```bash
ping IP_адрес_VM
```

Должны идти ответы. Если нет - проверьте сеть и firewall.

### Telnet (проверка порта)

Windows:
```cmd
telnet IP_адрес_VM 8080
```

Если telnet не установлен:
```powershell
# PowerShell от имени администратора
Enable-WindowsOptionalFeature -Online -FeatureName TelnetClient
```

macOS/Linux:
```bash
telnet IP_адрес_VM 8080
# или
nc -zv IP_адрес_VM 8080
```

Если подключение успешно - порт открыт и сервер работает.

---

## Типичные проблемы и решения

### Проблема: "Не удается подключиться к удаленному компьютеру"

**Решения:**
1. Проверьте правильность IP адреса
2. Убедитесь, что VM включена
3. Проверьте сетевое подключение (ping)
4. Убедитесь, что RDP разрешен на VM
5. Проверьте, что вы в одной сети с VM

### Проблема: "Connection refused" при подключении клиента

**Решения:**
1. Убедитесь, что сервер запущен на VM
2. Проверьте правильность порта
3. Откройте порт в Windows Firewall (см. выше)
4. Проверьте, что используете правильный IP адрес

### Проблема: Медленное подключение RDP

**Решения:**
1. В настройках RDP уменьшите качество цветопередачи
2. Отключите обои и эффекты
3. Уменьшите разрешение экрана

### Проблема: Не хватает памяти на VM

**Решения:**
1. Закройте ненужные программы на VM
2. Используйте параметры `-Xms100M -Xmx200M` для ограничения памяти Java
3. Не запускайте несколько экземпляров сервера одновременно

---

## Чек-лист подключения

- [ ] Получил IP адрес VM от преподавателя
- [ ] Получил логин и пароль
- [ ] Успешно подключился через RDP
- [ ] Проверил версию Java на VM
- [ ] Скопировал server.jar на VM
- [ ] Запустил сервер на VM
- [ ] Узнал IP адрес VM (ipconfig)
- [ ] Открыл порт 8080 в firewall (если нужно)
- [ ] Проверил подключение с локального компьютера (ping, telnet)
- [ ] Запустил клиент и успешно подключился к серверу
- [ ] Сделал скриншот Диспетчера задач для отчета

---

## Полезные команды Windows

```cmd
# Узнать IP адрес
ipconfig

# Проверить сетевое подключение
ping google.com

# Проверить открытые порты
netstat -an | findstr 8080

# Узнать версию Java
java -version

# Список запущенных Java процессов
tasklist | findstr java

# Убить процесс Java (если завис)
taskkill /F /IM java.exe

# Очистить экран
cls

# Показать содержимое директории
dir

# Перейти в другую директорию
cd C:\Users\username\Desktop
```

---

## Альтернатива: Использование облачных VM

Если у вас есть доступ к облачным провайдерам:

### Яндекс.Облако
1. Создайте VM с Windows Server
2. Настройте группу безопасности (открыть порт 8080)
3. Подключитесь через RDP

### AWS EC2
1. Создайте EC2 инстанс с Windows
2. Настройте Security Group (открыть порт 8080)
3. Получите пароль через консоль AWS
4. Подключитесь через RDP

### Azure
1. Создайте виртуальную машину Windows
2. Настройте Network Security Group
3. Подключитесь через RDP

---

## Завершение работы

После завершения экспериментов:

1. Остановите сервер (Ctrl+C в окне с сервером)
2. Скопируйте логи и результаты с VM на локальный компьютер
3. Закройте RDP подключение
4. Сообщите преподавателю о завершении работы с VM