# Домашнее задание №1: Пропускная способность компьютерной сети

Клиент-серверное приложение на Java для измерения пропускной способности сети.

## Требования

- Oracle JDK 21 или выше
- Maven 3.6+
- WireShark (для анализа пакетов)

## Сборка проекта

```bash
mvn clean package
```

После сборки в папке `target/` появятся два JAR файла:
- `server.jar` - серверное приложение
- `client.jar` - клиентское приложение

## Запуск сервера

### На Linux/Mac:
```bash
chmod +x run_server.sh
./run_server.sh 8080
```

### На Windows:
```bash
java -Xms100M -Xmx200M -jar target/server.jar 8080
```

### Вручную:
```bash
java -Xms100M -Xmx200M -jar target/server.jar <port>
```

Где `<port>` - номер порта (например, 8080)

## Запуск клиента

### На Linux/Mac:
```bash
chmod +x run_client.sh
./run_client.sh <IP> <port> <N> <M> <Q>
```

### На Windows или вручную:
```bash
java -jar target/client.jar <IP> <port> <N> <M> <Q>
```

Где:
- `<IP>` - IP адрес сервера
- `<port>` - порт сервера
- `<N>` - шаг увеличения размера массива (в байтах)
- `<M>` - количество итераций
- `<Q>` - количество под-итераций для усреднения

## Сценарии тестирования

### Сценарий 1 (маленькие массивы):
```bash
java -jar target/client.jar 192.168.1.100 8080 8 5000 25
```

### Сценарий 2 (большие массивы):
```bash
java -jar target/client.jar 192.168.1.100 8080 1024 5000 10
```

### Сценарий 3 (свои параметры):
```bash
java -jar target/client.jar 192.168.1.100 8080 64 3000 15
```

## Результаты

После выполнения клиент создаст CSV файл с результатами:
- `results_N8_M5000_Q25.csv` - для сценария 1
- `results_N1024_M5000_Q10.csv` - для сценария 2
- и т.д.

Эти файлы можно открыть в Excel для построения графиков.

## Тестирование на localhost

Для первоначального тестирования:

1. Запустите сервер в одном терминале:
```bash
java -jar target/server.jar 8080
```

2. Запустите клиент в другом терминале:
```bash
java -jar target/client.jar 127.0.0.1 8080 8 100 5
```

## Развертывание на удаленных машинах

1. Скопируйте `server.jar` на удаленную машину
2. Запустите сервер на удаленной машине
3. Узнайте IP адрес сервера (команда `ifconfig` на Linux/Mac или `ipconfig` на Windows)
4. Запустите клиент на своей машине, указав IP адрес сервера

## Мониторинг

### WireShark
Запустите WireShark и отфильтруйте пакеты по порту:
```
tcp.port == 8080
```

### Мониторинг нагрузки (Linux)
```bash
htop
nethogs
```

## Структура проекта

```
CW_HW_1/
├── pom.xml                          # Maven конфигурация
├── src/main/java/ru/hse/network/
│   ├── Server.java                  # Серверное приложение
│   └── Client.java                  # Клиентское приложение
├── run_server.sh                    # Скрипт запуска сервера
├── run_client.sh                    # Скрипт запуска клиента
└── README.md                        # Этот файл
```

## Примечания

- Клиент и сервер должны работать на разных физических машинах для финальных экспериментов
- Используйте `TCP_NODELAY = true` для отключения алгоритма Nagle
- Результаты сохраняются в CSV формате для удобного импорта в Excel